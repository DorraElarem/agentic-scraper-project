# Configuration environnement - TIMEOUTS CORRIGÉS
APP_ENV=development
DEBUG=false

# Base de données
DATABASE_URL=postgresql://postgres:dorra123@db:5432/scraper_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=dorra123
POSTGRES_DB=scraper_db

# Redis et Celery - TIMEOUTS COHÉRENTS
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# CORRECTIF CRITIQUE: Timeouts Celery augmentés et cohérents
TASK_TIME_LIMIT=1200                  # 20 minutes au lieu de 900
TASK_SOFT_TIME_LIMIT=1080             # 18 minutes 
WORKER_MAX_TASKS_PER_CHILD=50         
WORKER_PREFETCH_MULTIPLIER=1

# CORRECTIF CRITIQUE: Ollama timeouts MASSIV EMENT augmentés
OLLAMA_HOST=http://ollama:11434
OLLAMA_TIMEOUT=900                    # 15 minutes au lieu de 600
OLLAMA_CONNECTION_TIMEOUT=45          # 45s au lieu de 30s
OLLAMA_QUICK_TIMEOUT=180              # 3 minutes au lieu de 120s
OLLAMA_KEEP_ALIVE=15m                 # 15 minutes au lieu de 10m
OLLAMA_NUM_CTX=4096
OLLAMA_MAX_TOKENS=600
OLLAMA_TEMPERATURE=0.1
ENABLE_LLM_ANALYSIS=true
LLM_AUTO_ACTIVATION=true
LLM_QUALITY_THRESHOLD=0.05            # Plus permissif
OLLAMA_MODEL=mistral:7b-instruct-v0.2-q4_0

# Scraping - Timeouts très augmentés pour sites gov.tn
REQUEST_TIMEOUT=180                   # 3 minutes au lieu de 300
SCRAPE_MAX_RETRIES=2                  # Réduire les retries
DEFAULT_DELAY=2.0                     # Plus d'attente entre requêtes
MAX_CONTENT_LENGTH=2000000            # Augmenter limite contenu

# Nouveaux: Timeouts spécialisés pour gouvernement tunisien
BCT_TIMEOUT=300                       # 5 minutes pour BCT
INS_TIMEOUT=240                       # 4 minutes pour INS
GOV_TN_TIMEOUT=200                    # Timeout général sites .gov.tn

# Python
PYTHONUNBUFFERED=1
PYTHONPATH=/app